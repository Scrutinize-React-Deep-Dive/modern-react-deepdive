### 4.1.1 싱글 페이지 애플리케이션의 세상

`싱글 페이지 애플리케이션이란`

렌더링과 라우팅에 필요한 대부분의 기능을 서버가 아닌 브라우저의 자바스크립트에 의존하는 방식을 의미한다. 최초에 첫 페이지에서 데이터를 모두 불러온 이후에는 페이지 전환을 위한 모든 작업이 자바스크립트와 브라우저의 history.pushState와 history.replaceState로 이뤄지기 때문에 페이지를 불러온 이후에는 서버에서 HTML을 내려받지 않고 하나의 페이지에서 모든 작업이 이루어진다.

`전통적인 방식의 애플리케이션과 싱글 페이지 애플리케이션의 작동 비교`

전통적인 방식의 애플리케이션은 페이지 전환이 발생할 때마다 새롭게 페이지를 요청하고, HTML 페이지를 다운로드해 파싱하는 작업을 거친다.

`싱글 페이지 렌더링 방식의 유행과 JAM 스택의 등장`

기존의 웹 개발은 LAMP 스택, 즉 Linux(운영체제), Apache(서버), Mysql(데이터베이스), PHP/Python 등으로 구성돼 있었다. 이 LAMP 스택은 대부분의 처리를 서버에서 담당했고, 이러한 서버 의존성은 웹 애플리케이션 확장성에 걸림돌이 됐다.

이러한 문제를 해결하기 위해 JAM 스택, 즉 J(JavaScript), A(API), M(Markup)으로 구성된 스택이 등장했다. 대부분의 작업을 자바스크립트에서 수행할 수 있었기 떄문에 프론트엔드는 자바스크립트와 마크업(HTML, CSS)을 미리 빌드해 두고 정적으로 사용자에게 제공하면 이후 작동은 모두 사용자의 클라이언트에서 실행될 수 있었다. JAM 스택의 인기와 Node.js의 고도화에 힘입어 MEAN이나MERN 스택처럼 아예 API 서버 자체도 자바스크립트로 구현하는 구조가 인기를 끌기 시닥했다.

`새로운 패러다임의 웹서비스를 향한 요구`

웹 애플리케이션에서 제공하는 자바스크립트의 리소스는 매우 빠르게 늘었지만, 메모리나 하드웨어 성능은 그에 비해 느리게 발전했다. 그에 따라 자바스크립트 파싱에 소요되는 CPU 자원이 눈에 띄게 증가했다.

### 4.1.2 서버 사이드 렌더링이란 ?

서버 사이드 렌더링은 최초에 사용자에게 보여줄 페이지를 서버에서 렌더링해 빠르게 사용자에게 화면을 제공하는 방식을 의미한다.

즉, 싱글 페이지 애플리케이션과 서버 사이드 렌더링의 차이는 웹페이지 렌더링의 책임을 어디에 두느냐다.

`서버 사이드 렌더링의 장점`

1. 최초 페이지 진입이 비교적 빠르다.

서버에서 렌더링을 제공할 수 있을 정도의 충분한 리소스가 확보돼 있다는 전제하에 서버 사이드 렌더링은 사용자가 페이지에 접근했을 때 빠르게 페이지를 보여줄 수 있다.

서버에서 HTTP 요청이 더 빠를 것이고, HTML을 문자열로 미리 그려서 내려주는 것이 클라이언트에서 기존 HTML에 삽입하는 것보다 빠르다.

2. SEO(Search Engine Optimization)에 유리하다.

검색 엔진은 정적인 정보를 가져가기 때문에 자바스크립트를 다운하거나 실행하지 않아 텅빈 HTML을 읽어갈 가능성이 있다. 서버 사이드 렌더링을 이용하면 필요한 메타 데이터 등을 서버에서 가공해서 HTML 응답으로 제공할 수 있어 검색 엔진 최적화에 대응하기 좋다.

3. 누적 레이아웃 이동이 적다

서버 사이드 렌더링은 누적 레이아웃 이동(CLS)을 줄일 수 있다. 싱글 페이지 애플리케이션은 페이지가 API 요청에 의존하기 떄문에, 응답 속도에 따라 컨텐츠가 렌더링되는 시점이 달라질 수 있다. 적절한 조치를 취하지 않는다면 사용자에게 불편을 초래할 수 있다.

4. 사용자의 디바이스 성능에 비교적 자유롭다.

자바스크립트 리소스 실행은 사용자의 디바이스 성능에 절대적으로 의존적이다.

5. 보안에 좀 더 안전하다.

JAM 스택을 채택한 프로젝트의 공통된 문제점은 애플리케이션의 모든 활동이 브라우저에 노출된다는 것이다. 서버 사이드 렌더링의 경우 인증 혹은 민감한 작업을 서버에서 수행하고 그 결과만 브라우저에 제공해 이러한 보안 위협을 피할 수 있다.

`서버 사이드 렌더링의 단점`

1. 소스코드를 작성할 때 항상 서버를 고려해야 한다.

브라우저에만 있는 window 또는 sessionStorage와 같은 객체에 대한 처리가 필요하다.

2. 적절한 서버가 구축돼 있어야 한다.

사용자의 요청을 받아 렌더링을 수행할 서버가 필요하다.

3. 서비스 지연에 따른 문제

최초 렌더링 과정에서 지연 작업이 있다면 큰 문제가 될 수 있다.

### 4.1.3 SPA와 SSR을 모두 알아야 하는 이유

웹페이지의 설계와 목적, 그리고 우선순위에 따라 싱글 페이징 애플리케이션이 더 효율적일 수 있다. 서버 사이드 렌더링이 성능에 있어 실버 불릿은 아니라는 것을 알아야 한다.

`현대의 서버 사이드 렌더링`

현대의 서버 사이드 렌더링은 최초 웹사이트 진입 시에는 서버 사이드 렌더링 방식으로 서버에서 완성된 HTML을 제공받고, 이후 라우팅에서는 서버에서 내려받은 자바스크립트를 바탕으로 마치 싱글 페이지 애플리케이션처럼 작동한다.
